<html>

	<header>
		<title>Canvas test</title>
	</header>
	<style type="text/css">
		#container {  
			width: 100%;
			height: 100%;

			/* Firefox */
			display:-moz-box;
			-moz-box-orient:horizontal;
			-moz-box-pack:center;
			-moz-box-align:center;

			/* Safari and Chrome */
			display:-webkit-box;
			-webkit-box-orient:horizontal;
			-webkit-box-pack:center;
			-webkit-box-align:center;

			display: box;
			box-pack: center;
			box-align: center;
		}
		
		canvas { 
			border: 1px solid black; 
		}
	</style>
	<script type="text/javascript">
		
		const UP = 38;
		const DOWN = 40;
		const RIGHT = 39;
		const LEFT = 37;

		const SQUARE_WIDTH = 10;
		const SQUARE_HEIGHT = 10;

		const GAME_WIDTH = 250;
		const GAME_HEIGHT = 250;

		function SnakeBody(x,y) {
			this.x = x;
			this.y = y;
		}

		SnakeBody.prototype.update = function(context,speedX,speedY) {
			this.clearSquare(context);
			this.updatePosition(speedX,speedY);
			this.validateWallsCollision();
			this.drawSquare(context);
		}

		SnakeBody.prototype.updatePosition = function(speedX,speedY) {
			this.y+=speedY * SQUARE_HEIGHT;
			this.x+=speedX * SQUARE_WIDTH;
		}
		
		SnakeBody.prototype.clearSquare = function(context) {
			context.clearRect(this.x,this.y,SQUARE_WIDTH,SQUARE_HEIGHT);
		}

		SnakeBody.prototype.drawSquare = function(context) {
			context.fillRect(this.x,this.y,SQUARE_WIDTH,SQUARE_HEIGHT);
		}

		SnakeBody.prototype.validateWallsCollision = function() { 
			if(this.x > GAME_WIDTH) { 
				this.x = 0;
			}

			if(this.y > GAME_HEIGHT) {
				this.y = 0;
			}

			if(this.y < 0 ) {
				this.y = GAME_HEIGHT;
			}

			if(this.x < 0 ) { 
				this.x = GAME_WIDTH;
			}
		}

		var speedY = 0;
		var speedX = 0;
		var snakeBodies = new Array();

		function init() { 
			document.onkeyup = onKeyUp;
			snakeBodies.push(new SnakeBody(100,100));
			snakeBodies.push(new SnakeBody(100 - SQUARE_WIDTH,100));
			setInterval(onInterval, 100);
		}

		function onKeyUp(e) { 
			resetSpeed();

			if(e.keyCode == UP) { 
				speedY = -1;
			}

			if(e.keyCode == DOWN) { 
				speedY = 1;
			}

			if(e.keyCode == LEFT) { 
				speedX = -1;
			}

			if(e.keyCode == RIGHT) { 
				speedX = 1;
			}

		}

		function resetSpeed() { 
			speedX = 0;
			speedY = 0;
		}

		function onInterval() {
			var canvas = document.getElementById('canvas'); 
			if(canvas.getContext) { 
				var context = canvas.getContext("2d");
				snakeBodies.forEach(function(element,index,array) {
					element.update(context,speedX,speedY);
				})	
			}
				
		}

	</script>
	<body onLoad="init()">
		<div id="container">
			<canvas id="canvas" width="250" height="250"></canvas>
		</div>
	</body>

</html>