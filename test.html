<html>

	<header>
		<title>Canvas test</title>
	</header>
	<style type="text/css">
		#container {  
			width: 100%;
			height: 100%;

			/* Firefox */
			display:-moz-box;
			-moz-box-orient:horizontal;
			-moz-box-pack:center;
			-moz-box-align:center;

			/* Safari and Chrome */
			display:-webkit-box;
			-webkit-box-orient:horizontal;
			-webkit-box-pack:center;
			-webkit-box-align:center;

			display: box;
			box-pack: center;
			box-align: center;
		}
		
		canvas { 
			border: 1px solid black; 
		}
	</style>
	<script type="text/javascript">
		
		const UP = 38;
		const DOWN = 40;
		const RIGHT = 39;
		const LEFT = 37;

		const SQUARE_WIDTH = 10;
		const SQUARE_HEIGHT = 10;

		const GAME_WIDTH = 250;
		const GAME_HEIGHT = 250;

		var speedY = 0;
		var speedX = 0;

		var x = 100;
		var y = 100;

		function init() { 
			document.onkeyup = onKeyUp;
			setInterval(onInterval, 500);
		}

		function onKeyUp(e) { 
			resetSpeed();

			if(e.keyCode == UP) { 
				speedY = -1;
			}

			if(e.keyCode == DOWN) { 
				speedY = 1;
			}

			if(e.keyCode == LEFT) { 
				speedX = -1;
			}

			if(e.keyCode == RIGHT) { 
				speedX = 1;
			}

		}

		function resetSpeed() { 
			speedX = 0;
			speedY = 0;
		}

		function onInterval() {
			clearSquare();
			updateInput();
			validateWallsCollision();
			drawSquare();

		}

		function validateWallsCollision() { 
			if(x > GAME_WIDTH) { 
				x = 0;
			}

			if(y > GAME_HEIGHT) {
				y = 0;
			}

			if( y < 0 ) {
				y = GAME_HEIGHT;
			}

			if( x < 0 ) { 
				x = GAME_WIDTH;
			}
		}

		function updateInput() {
			y+=speedY * SQUARE_HEIGHT;
			x+=speedX * SQUARE_WIDTH;
		}

		function clearSquare() {
			var canvas = document.getElementById('canvas'); 
			if(canvas.getContext) { 
				var context = canvas.getContext("2d");
				context.clearRect(x,y,SQUARE_WIDTH,SQUARE_HEIGHT);
			}
		}

		function drawSquare() {
			var canvas = document.getElementById('canvas'); 
			if(canvas.getContext) { 
				var context = canvas.getContext("2d");
				context.fillRect(x,y,SQUARE_WIDTH,SQUARE_HEIGHT);
			}
		}

	</script>
	<body onLoad="init()">
		<div id="container">
			<canvas id="canvas" width="250" height="250"></canvas>
		</div>
	</body>

</html>